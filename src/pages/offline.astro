---
import Layout from "../layouts/Layout.astro";
import SongViewer from "../components/SongViewer.jsx";
---

<Layout title="Modo Offline">
    <div id="offline-shell" class="min-h-screen bg-white">
        <!-- 
        Este componente montará el SongViewer y buscará el ID en la URL 
        (window.location) para renderizar el canto desde Dexie.
      -->
        <SongViewer
            client:only="react"
            song={{ id: null, titulo: "Cargando..." }}
        />
    </div>

    <script>
        // Lógica para interceptar la navegación offline:
        // En realidad, SongViewer/useCanto ya deberían manejar el ID si se lo pasamos.
        // Pero como estamos en una página genérica "/offline", necesitamos decirle al componente qué ID buscar.

        // Una opción mejor es que este componente LEA el ID de la URL original
        // si el Service Worker hizo un rewrite.
        // O si usamos navigateFallback, la URL en la barra de direcciones SE MANTIENE (/music/123).
    </script>
</Layout>
